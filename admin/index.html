<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Using sign in and sign up with parse</title>
	<!-- JQUERY -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
	<link href="../css/styles.css" rel="stylesheet">
	<!-- BOOTSTRAP -->
	<!--link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
	<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script-->

	<!-- FONT AWESOME -->
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

	<!-- CUSTOM SCRIPTS -->
	<script src="js/admin-main.js"></script>

	<script type="text/javascript">
		$(document).ready(function(){
			Parse.initialize("bWvY8GIhV0Q6s3IJlfn9uqU4c22HmAdM9YpTFsTD", "bigv24fPDaGWtRaLLjjRzABL0gmz9ZML4pHQdGee");

			var user = Parse.User.current();

			//console.log(user);
			if (user){
				loggedIn();
				//console.log('logged in');
			} else {
				notLoggedIn();
				//console.log('logged out');
			}

			/*SIGN IN*/
			$('#signinSu').click(function(event){
				event.preventDefault();
				if($('#signinUs').val()==""){
			      	$('#signinEr').text("Name is required");
			      	$('#signinUs').addClass('focusedInput').focus();
			    } else if ($('#signinPw').val()==""){
			    	$('#signinEr').text("Password is required");
			      	$('#signinPw').addClass('focusedInput').focus();
			    } else {
			    	Parse.User.logIn($('#signinUs').val(), $('#signinPw').val(), {
					  success: function(user) {
					    $('#signinUs').val("");
						$('#signinPw').val("");
						$('#signinForm').modal('hide');
						loggedIn();
					  },
					  error: function(user, error) {
					    console.log("There was an error signing in");
					  }
					});
			    }
			});

			/*SIGN UP*/
			$('#signupSu').click(function(event){
				event.preventDefault();
				if($('#signupUs').val()==""){
			      	$('#signupEr').text("Name is required");
			      	$('#signupUs').addClass('focusedInput').focus();
			    } else if ($('#signupPw').val()==""){
			    	$('#signupEr').text("Password is required");
			      	$('#signupPw').addClass('focusedInput').focus();
			    } else if ($('#signupPw').val()!=$('#signupPwVe').val()) {
			    	$('#signupEr').text("Password does not match");
			      	$('#signupPwVe').addClass('focusedInput').focus();
			    } else {
			    	var user = new Parse.User();
					user.set("username", $('#signupUs').val());
					user.set("password", $('#signupPw').val());
					user.signUp(null, {
						success: function(u){
							$('#signupUs').val("");
							$('#signupPw').val("");
							$('#signupPwVe').val("");
							$('#signupForm').modal('hide');
							loggedIn();
						},
						error: function(u, e){
							console.log("There was an error signing up");
						}
					});
			    }
			});

		});

	</script>
</head>
<body>
	<div class="container">
		<nav id="mainNav" class="navbar navbar-inverse" role="navigation">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">Bandera Live Admin</a>
			</div>
			<ul class="nav navbar-nav">
				<li id="addEventLi"><a data-toggle="modal" data-target="#eventForm"><i class="fa fa-plus"></i> Add Event</a></li>
				<li id="eventLi"><a id="#eventList"><i class="fa fa-envelope"></i> Events</a></li>
			</ul>
			<ul class="nav navbar-nav pull-right">
				<li id="signinLi"><a data-toggle="modal" data-target="#signinForm">Sign In</a></li>
				<li id="signupLi"><a data-toggle="modal" data-target="#signupForm">Sign Up</a></li>
				<li id="signoutLi"><a id="signoutLink">Sign Out</a></li>
			</ul>
		</nav>
	</div>

<!-- SIGN IN -->
<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="signinForm">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
        <div class="modal-header">
          <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
          <h4 id="mySmallModalLabel" class="modal-title">Sign In</h4>
        </div>
        <div class="modal-body">
          <form role="form">
			  <div class="form-group">
			    <label for="signinUs">User name</label>
			    <input type="text" class="form-control" id="signinUs" placeholder="Enter username">
			  </div>
			  <div class="form-group">
			    <label for="signinPw">Password</label>
			    <input type="password" class="form-control" id="signinPw" placeholder="Password">
			  </div>
			  <p class="bg-info" id="signinEr"></p>
			  <button type="submit" class="btn btn-default" id="signinSu">Submit</button>
			</form>
        </div>
      </div>
  </div>
</div>

<!-- SIGN UP -->
<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="signupForm">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
        <div class="modal-header">
          <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
          <h4 id="mySmallModalLabel" class="modal-title">Sign In</h4>
        </div>
        <div class="modal-body">
          <form role="form">
			  <div class="form-group">
			    <label for="signupUs">User name</label>
			    <input type="text" class="form-control" id="signupUs" placeholder="Enter username">
			  </div>
			  <div class="form-group">
			    <label for="signupPw">Password</label>
			    <input type="password" class="form-control" id="signupPw" placeholder="Password">
			  </div>
			  <div class="form-group">
			    <label for="signupPwVe">Password</label>
			    <input type="password" class="form-control" id="signupPwVe" placeholder="Password">
			  </div>
			  <p class="bg-info" id="signupEr"></p>
			  <button type="submit" class="btn btn-default" id="signupSu">Submit</button>
			</form>
        </div>
      </div>
  </div>
</div>

	<!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>	
</body>
</html>